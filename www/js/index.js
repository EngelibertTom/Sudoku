var w=function(){O.fillStyle=h,O.fillRect(0,0,f,L)},_=function(q,A,B,E,N){const T=q*B,H=A*B;if(N)O.fillStyle=N,O.fillRect(T+1,H+1,B-2,B-2);O.strokeStyle=E,O.strokeRect(T,H,B,B)},g=function(q,A,B){_(q,A,Q*3,k,B);for(let E=0;E<3;E++)for(let N=0;N<3;N++)_(q*3+N,A*3+E,Q,V)},D=function(q,A){if(U[A][q]!==null){O.font="bold 60px Arial",O.textBaseline="middle",O.textAlign="center";const B=q*Q+Math.floor(Q*0.5),E=A*Q+Math.floor(Q*0.575);O.fillText(U[A][q].toString(),B,E)}else{O.fillStyle="#000",O.font="16px Arial",O.textBaseline="top",O.textAlign="start";const B=W[A][q],E=Math.max(Q-2,Math.floor(Q*0.8)),N=Math.floor(E/3),T=Math.max(1,Math.floor(Q*0.1)),H=q*Q+T,K=A*Q+T;for(let M=1;M<=9;M++){const X=B.includes(M)?M:null,G=(M-1)%3,F=Math.floor((M-1)/3),I=H+N*G,J=K+N*F;O.fillText(X!==null?X.toString():"",I,J)}}},P=function(){for(let q=0;q<9;q++)for(let A=0;A<9;A++)D(A,q)},b=function(){w();for(let q=0;q<3;q++)for(let A=0;A<3;A++)g(A,q)},y=function(q,A,B){if(U[B][A]===q)U[B][A]=null,$(A,B,q,!0);else if(U[B][A]===null&&W[B][A].includes(q))U[B][A]=q,$(A,B,q,!1)},$=function(q,A,B,E){for(let H=0;H<9;H++)if(H!==q){const K=W[A][H];if(E){const M=K.indexOf(B);if(M!==-1)K.splice(M,1)}else if(K.includes(B))K.splice(K.indexOf(B),1)}for(let H=0;H<9;H++)if(H!==A){const K=W[H][q];if(E){const M=K.indexOf(B);if(M!==-1)K.splice(M,1)}else if(K.includes(B))K.splice(K.indexOf(B),1)}const N=Math.floor(q/3),T=Math.floor(A/3);for(let H=N*3;H<N*3+3;H++)for(let K=T*3;K<T*3+3;K++)if(H!==q||K!==A){const M=W[K][H];if(E){const X=M.indexOf(B);if(X!==-1)M.splice(X,1)}else if(M.includes(B))M.splice(M.indexOf(B),1)}},Z=new WebSocket(`ws://${location.host}`);Z.onopen=()=>setInterval(()=>Z.send("ping"),5000);Z.onmessage=(q)=>{if(q.data!=="Well received")console.log(q.data);if(q.data==="reload")location.reload()};var h="#DDD",V="#AAA",k="#000",Y=document.getElementById("sudokuCanvas"),O=Y.getContext("2d"),f=Y.width,L=Y.height,Q=Math.round(Math.min(f,L)/9),W=[],U=[];for(let q=0;q<9;q++){W.push([]),U.push([]);for(let A=0;A<9;A++)W[q].push([1,2,3,4,5,6,7,8,9]),U[q].push(null)}b();P();var R=null;Y.addEventListener("mousemove",(q)=>{q.stopPropagation();const{offsetX:A,offsetY:B}=q,E=Math.min(Math.floor(A/Q),8),N=Math.min(Math.floor(B/Q),8);if(R===null||R[0]!==E||R[1]!==N)R=[E,N],console.log("Celulle s\xE9lectionn\xE9e:",R)});Y.addEventListener("mouseout",(q)=>{q.stopPropagation(),R=null,console.log("Celulle s\xE9lectionn\xE9e:",R)});document.addEventListener("keydown",(q)=>{if(R!==null){const A=R[0],B=R[1],E=q.key;if(/^[1-9]$/.test(E)){const N=parseInt(E);y(N,A,B),b(),P()}}});console.log("Frontend charg\xE9");
